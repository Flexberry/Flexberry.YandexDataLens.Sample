# Геоданные в DataLens

## Введение
Для работы геоданными в DataLens предусмотрено [2 внутренних типа](https://datalens.tech/docs/ru/concepts/data-types.html):
- Геоточка
- Геополигон

Согласно [документации](https://datalens.tech/docs/ru/dataset/types-lookup-table.html) данные подобных типов - это должны быть вычисляемые значения, т.к. аналогичные типы в БД, таких как ClickHouse и PostgreSQL, отсутствуют.

Для вычисления используются 2 функции:
- [GEOPOINT](https://datalens.tech/docs/ru/function-ref/GEOPOINT.html) - возвращает значение типа Геоточка
- [GEOPOLYGON](https://datalens.tech/docs/ru/function-ref/GEOPOLYGON.html) - возвращает значение в формате Геополигона

## Получение геоданных из БД 
Чтобы воспользоваться геоданными из сторонних БД необходимо:
1. Преобразовать имеющиеся геоданные к следующим форматам внутри подключаемой БД:
   - Для использования типа Геоточка преобразовать к:
     - 2 значениям вещественного типа
     - строковому представлению вида: `[55.75222,37.61556]`
   - Для типа Геополигон преобразовать в строковое представление вида: `[[[55.75,37.52],[55.75,37.68],[55.65,37.60]],[[55.79,37.60],[55.76,37.57],[55.76,37.63]]]`
2. Создать в датасете вычисляемое поле с использованием функции [GEOPOINT](https://datalens.tech/docs/ru/function-ref/GEOPOINT.html) или [GEOPOLYGON](https://datalens.tech/docs/ru/function-ref/GEOPOLYGON.html).


## Визуализация геоданных
Согласно [обсуждениям](https://github.com/datalens-tech/datalens/issues/36) в сообществе DataLens, отображение геоданных на картах в open-source проекте DataLens пока не реализовано, но в будущем планируется такая возможность.
